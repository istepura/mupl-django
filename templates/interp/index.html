<!DOCTYPE html>
{% load static %}
<head>
    <style type="text/css" media="screen">
        #editor { 
            height: 400px;
        }
        #send_button {
            float: left;
        }
        #left {
            float: left;
            width: 60%;
        }
        #right {
            float: right;
            background-color : rgb(238, 238, 238);
            height: 200px;
            width: 40%;
        }
        #result {
        }
    </style>
</head>
<html lang="en">
    <body>
        <script src="http://code.jquery.com/jquery-1.10.2.min.js" ></script>
        <script src="{% static "ace/ace.js" %}" type="text/javascript" charset="utf-8"></script>
        <div id = "warpper">
            <div id="left">
                <div id="editor"/> </div>
                <button id="send_button" >SUBMIT</button> 
                <script>
                    var editor = ace.edit("editor");
                    editor.setTheme("ace/theme/twilight");
                    editor.getSession().setMode("ace/mode/javascript");
                </script>

            </div>

            <div id="right">
                <span id="result" class = "short_text"> </span>
            </div>
        </div>
        <script>
            $( "#send_button" ).click(function( event ) {
                event.preventDefault();
                var posting = $.post( "do/", 
                    {
                        csrfmiddlewaretoken: '{{ csrf_token }}',
                        code: editor.getValue(),
                    });
                // Put the results in a div
                posting.done(function( data ) {
                    var content =  data;
                    if (content.status == "ok") {
                        $( "#result" ).empty().append( content.result);
                        }
                        else{
                            $("#result").empty().append("Error");
                            editor.gotoLine(content.ln, content.col);
                        }

                });
            });
        </script>
    </body>
</html>
